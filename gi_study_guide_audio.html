<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>üéß GI Study Guide ‚Äî Audio Edition</title>
    <style>
        :root { --primary: #059669; --primary-light: #10b981; --accent: #e07b53; --bg: #1a1a2e; --card-bg: #16213e; --text: #e8e8e8; --text-muted: #a0a0a0; --border: #2d3a4f; --highlight: rgba(5, 150, 105, 0.3); }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg); color: var(--text); line-height: 1.8; padding: 20px; padding-bottom: 200px; font-size: 18px; }
        .header { text-align: center; padding: 30px 20px; background: linear-gradient(135deg, var(--primary), var(--primary-light)); border-radius: 16px; margin-bottom: 20px; }
        .header h1 { font-size: 1.5rem; margin-bottom: 8px; }
        .audio-controls { position: fixed; bottom: 0; left: 0; right: 0; background: linear-gradient(180deg, rgba(26,26,46,0.95), rgba(22,33,62,0.98)); padding: 15px 20px; padding-bottom: max(15px, env(safe-area-inset-bottom)); border-top: 1px solid var(--border); z-index: 1000; }
        .controls-row { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 10px; }
        .control-btn { background: var(--primary); border: none; color: white; width: 50px; height: 50px; border-radius: 50%; font-size: 1.3rem; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .control-btn.play-btn { width: 65px; height: 65px; font-size: 1.6rem; background: var(--accent); }
        .progress-section { display: flex; align-items: center; gap: 10px; font-size: 0.8rem; color: var(--text-muted); }
        .progress-bar { flex: 1; height: 6px; background: var(--border); border-radius: 3px; overflow: hidden; cursor: pointer; }
        .progress-fill { height: 100%; background: var(--accent); width: 0%; }
        .current-topic { text-align: center; font-size: 0.85rem; color: var(--accent); margin-top: 8px; }
        .settings-row { display: flex; justify-content: center; gap: 20px; margin-top: 10px; }
        .speed-control, .pause-control { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-muted); }
        .speed-control select, .pause-control select { background: var(--card-bg); color: var(--text); border: 1px solid var(--border); padding: 6px 10px; border-radius: 8px; }
        .section { background: var(--card-bg); border-radius: 12px; margin-bottom: 20px; overflow: hidden; }
        .section-header { background: var(--primary); padding: 15px 20px; font-size: 1.1rem; font-weight: 600; cursor: pointer; display: flex; justify-content: space-between; }
        .section-content { padding: 20px; }
        .topic { margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid var(--border); }
        .topic:last-child { border-bottom: none; }
        .topic-title { font-size: 1.1rem; font-weight: 600; color: var(--accent); margin-bottom: 15px; }
        .content-block { margin-bottom: 15px; padding: 15px; background: rgba(255,255,255,0.03); border-radius: 8px; border-left: 3px solid var(--primary); }
        .content-block.high-yield { border-left-color: #ef4444; background: rgba(239, 68, 68, 0.1); }
        .content-block.guideline { border-left-color: #8b5cf6; background: rgba(139, 92, 246, 0.1); }
        .block-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted); margin-bottom: 8px; }
        .sentence.current { background: var(--highlight); border-radius: 3px; }
        .voice-selector { margin: 15px 0; padding: 15px; background: var(--card-bg); border-radius: 12px; }
        .voice-selector select { width: 100%; padding: 10px; background: var(--bg); color: var(--text); border: 1px solid var(--border); border-radius: 8px; }
        .toc { background: var(--card-bg); border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        .toc-item { padding: 10px 15px; margin: 5px 0; background: rgba(255,255,255,0.03); border-radius: 8px; cursor: pointer; display: flex; justify-content: space-between; }
        .toc-item.active { background: var(--primary); }
        .toc-duration { font-size: 0.8rem; color: var(--text-muted); }
    </style>
</head>
<body>
<div class="header">
    <h1>üçΩÔ∏è GI Study Guide</h1>
    <p>Audio Edition ‚Ä¢ ABIM Board Review ‚Ä¢ 9% of Exam</p>
    <p style="font-size:0.8rem; opacity:0.7; margin-top:8px;">v1.0 BUILD #8</p>
</div>
<div class="voice-selector"><label>üéôÔ∏è Voice:</label><select id="voiceSelect"></select></div>
<div class="toc">
    <h2>üìã Chapters</h2>
    <div class="toc-item" data-section="0"><span>1. GERD & PUD</span><span class="toc-duration">~6 min</span></div>
    <div class="toc-item" data-section="1"><span>2. GI Bleeding</span><span class="toc-duration">~7 min</span></div>
    <div class="toc-item" data-section="2"><span>3. IBD</span><span class="toc-duration">~6 min</span></div>
    <div class="toc-item" data-section="3"><span>4. Liver Disease</span><span class="toc-duration">~8 min</span></div>
    <div class="toc-item" data-section="4"><span>5. Pancreatitis</span><span class="toc-duration">~5 min</span></div>
    <div class="toc-item" data-section="5"><span>6. Biliary Disease</span><span class="toc-duration">~5 min</span></div>
</div>
<div id="audioContent">
<div class="section" data-section="0">
    <div class="section-header"><span>1. GERD & PUD</span><span>‚ñ∂Ô∏è</span></div>
    <div class="section-content">
        <div class="topic">
            <div class="topic-title">GERD Management</div>
            <div class="content-block guideline">
                <div class="block-label">Treatment</div>
                <p class="speakable">GERD is managed with lifestyle modifications and acid suppression. First-line therapy is PPI for 8 weeks.</p>
                <p class="speakable">Alarm symptoms requiring endoscopy include dysphagia, odynophagia, weight loss, anemia, and GI bleeding.</p>
                <p class="speakable">Barrett's esophagus is intestinal metaplasia of the distal esophagus and increases adenocarcinoma risk.</p>
                <p class="speakable">Surveillance endoscopy intervals depend on dysplasia: every 3 to 5 years without dysplasia, every 6 to 12 months with low-grade dysplasia.</p>
            </div>
        </div>
        <div class="topic">
            <div class="topic-title">Peptic Ulcer Disease</div>
            <div class="content-block high-yield">
                <div class="block-label">H. pylori</div>
                <p class="speakable">H. pylori causes most duodenal ulcers and 70 percent of gastric ulcers. Test and treat all PUD patients.</p>
                <p class="speakable">First-line treatment is quadruple therapy: PPI plus bismuth plus metronidazole plus tetracycline for 14 days.</p>
                <p class="speakable">Alternatively, use clarithromycin-based triple therapy if local resistance is under 15 percent.</p>
                <p class="speakable">Confirm eradication 4 weeks after completing therapy with urea breath test or stool antigen.</p>
            </div>
        </div>
    </div>
</div>
<div class="section" data-section="1">
    <div class="section-header"><span>2. GI Bleeding</span><span>‚ñ∂Ô∏è</span></div>
    <div class="section-content">
        <div class="topic">
            <div class="topic-title">Upper GI Bleeding</div>
            <div class="content-block guideline">
                <div class="block-label">Management</div>
                <p class="speakable">Initial management includes resuscitation, restrictive transfusion with hemoglobin threshold of 7, and IV PPI.</p>
                <p class="speakable">EGD should be performed within 24 hours of presentation. Earlier if hemodynamically unstable after resuscitation.</p>
                <p class="speakable">PPI infusion after endoscopic therapy reduces rebleeding in high-risk ulcers with active bleeding or visible vessel.</p>
                <p class="speakable">Variceal bleeding requires octreotide, antibiotics, and urgent endoscopic band ligation.</p>
            </div>
            <div class="content-block high-yield">
                <div class="block-label">Board Pearl</div>
                <p class="speakable">Glasgow-Blatchford score of zero identifies very low-risk patients who may be managed as outpatients.</p>
                <p class="speakable">For variceal bleeding, ceftriaxone prophylaxis reduces infection and mortality.</p>
            </div>
        </div>
        <div class="topic">
            <div class="topic-title">Lower GI Bleeding</div>
            <div class="content-block">
                <div class="block-label">Causes and Approach</div>
                <p class="speakable">Common causes are diverticulosis, hemorrhoids, angiodysplasia, and colorectal cancer.</p>
                <p class="speakable">Most lower GI bleeds stop spontaneously. Colonoscopy is both diagnostic and therapeutic.</p>
                <p class="speakable">CTA or tagged RBC scan can localize bleeding if colonoscopy is non-diagnostic.</p>
            </div>
        </div>
    </div>
</div>
<div class="section" data-section="2">
    <div class="section-header"><span>3. IBD</span><span>‚ñ∂Ô∏è</span></div>
    <div class="section-content">
        <div class="topic">
            <div class="topic-title">Ulcerative Colitis vs Crohn's Disease</div>
            <div class="content-block">
                <div class="block-label">Key Differences</div>
                <p class="speakable">Ulcerative colitis involves only the colon, with continuous mucosal inflammation starting at the rectum.</p>
                <p class="speakable">Crohn's disease can affect any part of the GI tract, most commonly terminal ileum. It is transmural with skip lesions.</p>
                <p class="speakable">UC presents with bloody diarrhea. Crohn's presents with abdominal pain, diarrhea, and may have fistulas or strictures.</p>
                <p class="speakable">Toxic megacolon is a complication of severe UC. It requires urgent colectomy if not responding to medical therapy.</p>
            </div>
        </div>
        <div class="topic">
            <div class="topic-title">IBD Treatment</div>
            <div class="content-block guideline">
                <div class="block-label">Medications</div>
                <p class="speakable">5-ASA drugs like mesalamine are used for mild to moderate UC but not effective for Crohn's.</p>
                <p class="speakable">Corticosteroids induce remission but should not be used for maintenance.</p>
                <p class="speakable">Thiopurines azathioprine and 6-MP are steroid-sparing agents. Check TPMT before starting.</p>
                <p class="speakable">Biologics include TNF inhibitors like infliximab and adalimumab, vedolizumab targeting alpha-4-beta-7 integrin, and ustekinumab targeting IL-12/23.</p>
            </div>
        </div>
    </div>
</div>
<div class="section" data-section="3">
    <div class="section-header"><span>4. Liver Disease</span><span>‚ñ∂Ô∏è</span></div>
    <div class="section-content">
        <div class="topic">
            <div class="topic-title">Cirrhosis Complications</div>
            <div class="content-block high-yield">
                <div class="block-label">Ascites</div>
                <p class="speakable">Serum ascites albumin gradient, or SAAG, 1.1 or higher indicates portal hypertension.</p>
                <p class="speakable">First-line treatment is sodium restriction and diuretics. Typical ratio is spironolactone 100 plus furosemide 40.</p>
                <p class="speakable">Large volume paracentesis requires albumin replacement if removing more than 5 liters. Give 6 to 8 grams of albumin per liter removed.</p>
            </div>
            <div class="content-block high-yield">
                <div class="block-label">SBP</div>
                <p class="speakable">Spontaneous bacterial peritonitis is diagnosed by ascitic fluid PMN count 250 or higher.</p>
                <p class="speakable">Treat empirically with ceftriaxone. Give IV albumin on day 1 and day 3 to reduce hepatorenal syndrome.</p>
                <p class="speakable">Secondary prophylaxis with daily norfloxacin or TMP-SMX is indicated after an episode of SBP.</p>
            </div>
            <div class="content-block high-yield">
                <div class="block-label">Hepatic Encephalopathy</div>
                <p class="speakable">HE presents with altered mental status and asterixis in cirrhotic patients.</p>
                <p class="speakable">Treatment is lactulose titrated to 2 to 3 bowel movements per day. Add rifaximin for recurrent episodes.</p>
                <p class="speakable">Identify and treat precipitants: infection, GI bleeding, constipation, medications, electrolyte disturbances.</p>
            </div>
        </div>
        <div class="topic">
            <div class="topic-title">Viral Hepatitis</div>
            <div class="content-block guideline">
                <div class="block-label">Hepatitis C</div>
                <p class="speakable">Direct-acting antivirals cure over 95 percent of hepatitis C regardless of genotype.</p>
                <p class="speakable">All adults should be screened for HCV at least once.</p>
                <p class="speakable">Treatment is indicated for all patients with chronic HCV infection.</p>
            </div>
            <div class="content-block guideline">
                <div class="block-label">Hepatitis B</div>
                <p class="speakable">Chronic HBV is treated based on ALT, HBV DNA level, and liver fibrosis.</p>
                <p class="speakable">Treat all cirrhotics with detectable HBV DNA. Use entecavir or tenofovir.</p>
                <p class="speakable">Screen for HCC with ultrasound and AFP every 6 months in cirrhotics or high-risk patients.</p>
            </div>
        </div>
    </div>
</div>
<div class="section" data-section="4">
    <div class="section-header"><span>5. Pancreatitis</span><span>‚ñ∂Ô∏è</span></div>
    <div class="section-content">
        <div class="topic">
            <div class="topic-title">Acute Pancreatitis</div>
            <div class="content-block guideline">
                <div class="block-label">Diagnosis and Management</div>
                <p class="speakable">Diagnose with 2 of 3: characteristic abdominal pain, lipase greater than 3 times normal, imaging findings.</p>
                <p class="speakable">Most common causes are gallstones and alcohol.</p>
                <p class="speakable">Aggressive early IV fluid resuscitation with lactated Ringer's. Goal-directed therapy based on BUN and hematocrit.</p>
                <p class="speakable">Early oral feeding when tolerated. Antibiotics only for infected necrosis, not for prophylaxis.</p>
                <p class="speakable">ERCP within 24 hours for gallstone pancreatitis with cholangitis or persistent biliary obstruction.</p>
            </div>
            <div class="content-block high-yield">
                <div class="block-label">Severity Assessment</div>
                <p class="speakable">Severe pancreatitis is defined by persistent organ failure beyond 48 hours.</p>
                <p class="speakable">Bedside Index for Severity in Acute Pancreatitis, or BISAP, predicts mortality. Score includes BUN greater than 25, impaired mental status, SIRS, age over 60, and pleural effusion.</p>
            </div>
        </div>
    </div>
</div>
<div class="section" data-section="5">
    <div class="section-header"><span>6. Biliary Disease</span><span>‚ñ∂Ô∏è</span></div>
    <div class="section-content">
        <div class="topic">
            <div class="topic-title">Choledocholithiasis and Cholangitis</div>
            <div class="content-block high-yield">
                <div class="block-label">Ascending Cholangitis</div>
                <p class="speakable">Charcot's triad is fever, jaundice, and right upper quadrant pain. It is present in 50 to 70 percent of cases.</p>
                <p class="speakable">Reynolds' pentad adds altered mental status and hypotension, indicating severe septic cholangitis.</p>
                <p class="speakable">Treatment requires antibiotics and biliary drainage. ERCP is first-line for decompression.</p>
                <p class="speakable">Do not delay biliary drainage for imaging in unstable patients.</p>
            </div>
        </div>
    </div>
</div>
</div>
<div class="audio-controls">
    <div class="controls-row">
        <button class="control-btn" onclick="skipBackward()">‚è™</button>
        <button class="control-btn play-btn" id="playPauseBtn" onclick="togglePlayPause()">‚ñ∂Ô∏è</button>
        <button class="control-btn" onclick="skipForward()">‚è©</button>
        <button class="control-btn" onclick="stopReading()">‚èπÔ∏è</button>
    </div>
    <div class="progress-section"><span id="currentTime">0:00</span><div class="progress-bar" onclick="seekTo(event)"><div class="progress-fill" id="progressFill"></div></div><span id="totalTime">0:00</span></div>
    <div class="current-topic" id="currentTopic">Ready to play</div>
    <div class="settings-row">
        <div class="speed-control"><label>Speed:</label><select id="speedSelect" onchange="updateSpeed()"><option value="0.75">0.75√ó</option><option value="1" selected>1√ó</option><option value="1.25">1.25√ó</option><option value="1.5">1.5√ó</option><option value="2">2√ó</option></select></div>
        <div class="pause-control"><label>Pauses:</label><select id="pauseSelect" onchange="updatePauses()"><option value="short">Short</option><option value="medium" selected>Medium</option><option value="long">Long</option><option value="extra">Extra</option></select></div>
    </div>
</div>
<script>
let isPlaying=false,currentSentenceIndex=0,sentences=[],speechRate=1,englishVoices=[],pauseSettings={sentence:400,paragraph:800,section:1500};
document.addEventListener('DOMContentLoaded',()=>{loadVoices();buildSentenceList();setupTOC();const s=localStorage.getItem('gi_audio_pos');if(s)currentSentenceIndex=parseInt(s)||0;});
function loadVoices(){const sel=document.getElementById('voiceSelect');function pop(){const all=speechSynthesis.getVoices();englishVoices=all.filter(v=>v.lang.startsWith('en-'));if(!englishVoices.length){setTimeout(pop,100);return;}englishVoices.sort((a,b)=>a.localService&&!b.localService?-1:!a.localService&&b.localService?1:0);sel.innerHTML='';englishVoices.forEach((v,i)=>{const o=document.createElement('option');o.value=i;o.textContent=`${v.localService?'‚≠ê ':''}${v.name}`;sel.appendChild(o);});}pop();speechSynthesis.onvoiceschanged=pop;}
function buildSentenceList(){sentences=[];document.querySelectorAll('.speakable').forEach((el,i,arr)=>{const sec=el.closest('.section'),top=el.closest('.topic');sentences.push({text:el.textContent.trim(),element:el,section:sec?parseInt(sec.dataset.section):0,topic:top?.querySelector('.topic-title')?.textContent||'',label:el.closest('.content-block')?.querySelector('.block-label')?.textContent||'',isNewBlock:i===0||el.closest('.content-block')!==arr[i-1]?.closest('.content-block'),isNewSection:i===0||(sec?.dataset.section!==arr[i-1]?.closest('.section')?.dataset.section)});});updateProgress();}
function setupTOC(){document.querySelectorAll('.toc-item').forEach(item=>{item.addEventListener('click',()=>jumpToSection(parseInt(item.dataset.section)));});}
function jumpToSection(idx){const i=sentences.findIndex(s=>s.section===idx);if(i!==-1){currentSentenceIndex=i;if(isPlaying){speechSynthesis.cancel();speakCurrentSentence();}updateProgress();}}
function togglePlayPause(){isPlaying?pauseReading():startReading();}
function startReading(){isPlaying=true;document.getElementById('playPauseBtn').textContent='‚è∏Ô∏è';speakCurrentSentence();}
function pauseReading(){isPlaying=false;speechSynthesis.cancel();document.getElementById('playPauseBtn').textContent='‚ñ∂Ô∏è';localStorage.setItem('gi_audio_pos',currentSentenceIndex);}
function stopReading(){isPlaying=false;speechSynthesis.cancel();currentSentenceIndex=0;document.getElementById('playPauseBtn').textContent='‚ñ∂Ô∏è';updateProgress();localStorage.removeItem('gi_audio_pos');}
function speakCurrentSentence(){if(!isPlaying||currentSentenceIndex>=sentences.length){if(currentSentenceIndex>=sentences.length)stopReading();return;}const s=sentences[currentSentenceIndex],u=new SpeechSynthesisUtterance(s.text),vi=parseInt(document.getElementById('voiceSelect').value)||0;if(englishVoices[vi])u.voice=englishVoices[vi];u.lang='en-US';u.rate=speechRate;document.querySelectorAll('.current').forEach(el=>el.classList.remove('current'));s.element.classList.add('current');s.element.scrollIntoView({behavior:'smooth',block:'center'});document.getElementById('currentTopic').textContent=s.topic;updateProgress();u.onend=()=>{currentSentenceIndex++;if(currentSentenceIndex<sentences.length){let p=pauseSettings.sentence;if(sentences[currentSentenceIndex].isNewSection)p=pauseSettings.section;else if(sentences[currentSentenceIndex].isNewBlock)p=pauseSettings.paragraph;setTimeout(()=>{if(isPlaying)speakCurrentSentence();},p);}else stopReading();};speechSynthesis.speak(u);}
function updateProgress(){const pct=sentences.length?(currentSentenceIndex/sentences.length)*100:0;document.getElementById('progressFill').style.width=pct+'%';const avg=3/speechRate;document.getElementById('currentTime').textContent=Math.floor(currentSentenceIndex*avg/60)+':'+(Math.floor(currentSentenceIndex*avg)%60).toString().padStart(2,'0');document.getElementById('totalTime').textContent=Math.floor(sentences.length*avg/60)+':'+(Math.floor(sentences.length*avg)%60).toString().padStart(2,'0');}
function seekTo(e){currentSentenceIndex=Math.floor((e.offsetX/e.currentTarget.offsetWidth)*sentences.length);if(isPlaying){speechSynthesis.cancel();speakCurrentSentence();}updateProgress();}
function skipForward(){currentSentenceIndex=Math.min(currentSentenceIndex+10,sentences.length-1);if(isPlaying){speechSynthesis.cancel();speakCurrentSentence();}updateProgress();}
function skipBackward(){currentSentenceIndex=Math.max(currentSentenceIndex-10,0);if(isPlaying){speechSynthesis.cancel();speakCurrentSentence();}updateProgress();}
function updateSpeed(){speechRate=parseFloat(document.getElementById('speedSelect').value);updateProgress();}
function updatePauses(){const s=document.getElementById('pauseSelect').value;pauseSettings=s==='short'?{sentence:200,paragraph:400,section:800}:s==='long'?{sentence:600,paragraph:1200,section:2000}:s==='extra'?{sentence:800,paragraph:1500,section:2500}:{sentence:400,paragraph:800,section:1500};}
</script>
</body>
</html>
